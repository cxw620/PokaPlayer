import{z as j,j as F,i as u,r as P,o as k,c as b,e as I,b as e,t as l,T as B,q as v,f as o,w as n,s as S,F as A,m as d}from"./index-e2ba9829.js";import{u as q}from"./user-b8b24cf2.js";const z={key:0},E={class:"setting-item"},L={class:"content"},R={class:"title"},G={class:"description"},H={class:"control"},J={class:"setting-item"},K={class:"content"},M={class:"title"},O={class:"description"},Q={class:"control"},W={class:"setting-item"},X={class:"content"},Y={class:"title"},Z={class:"control"},x={class:"setting-item"},ee={class:"content"},se={class:"title"},te={class:"description"},le={class:"setting-item"},ae={class:"content"},oe={class:"title"},ne={class:"description"},ie={class:"setting-item"},de={class:"content"},ue={class:"title"},re={class:"description"},ve={style:{display:"flex","justify-content":"flex-end","margin-top":"var(--padding)",gap:"var(--padding)"}},me={style:{display:"flex","justify-content":"flex-end","margin-top":"var(--padding)",gap:"var(--padding)"}},ce={style:{display:"flex","justify-content":"flex-end","margin-top":"var(--padding)",gap:"var(--padding)"}},_e={__name:"User",setup(pe){const C=q(),{userInfo:r}=j(C),f=F("PokaAPI"),m=u(!1),$=u(""),c=u(!1),V=u(""),p=u(!1),w=u(""),_=u(""),U=u("");async function h(){r.value=await f.getUserInfo()}async function N(){await f.changeUserName($.value),m.value=!1,await h()}async function D(){await f.changeUserUsername(V.value),c.value=!1,await h()}async function T(){if(_.value!==U.value){window.alert("Password not match");return}await f.changeUserPassword(w.value,_.value),p.value=!1}return(t,s)=>{const i=P("p-btn"),g=P("p-input"),y=P("Dialog");return k(),b(A,null,[(k(),I(B,{to:"#header-center"},[e("p",null,l(t.$t("settings.user.title")),1)])),v(r)?(k(),b("div",z,[e("div",E,[e("div",L,[e("div",R,l(t.$t("settings.user.name")),1),e("div",G,l(v(r).name),1)]),e("div",H,[o(i,{onClick:s[0]||(s[0]=a=>m.value=!0)},{default:n(()=>[d(l(t.$t("settings.user.edit")),1)]),_:1})])]),e("div",J,[e("div",K,[e("div",M,l(t.$t("settings.user.username")),1),e("div",O,l(v(r).username),1)]),e("div",Q,[o(i,{onClick:s[1]||(s[1]=a=>c.value=!0)},{default:n(()=>[d(l(t.$t("settings.user.edit")),1)]),_:1})])]),e("div",W,[e("div",X,[e("div",Y,l(t.$t("settings.user.password")),1)]),e("div",Z,[o(i,{onClick:s[2]||(s[2]=a=>p.value=!0)},{default:n(()=>[d(l(t.$t("settings.user.changePassword")),1)]),_:1})])]),e("div",x,[e("div",ee,[e("div",se,l(t.$t("settings.user.id")),1),e("div",te,l(v(r)._id),1)])]),e("div",le,[e("div",ae,[e("div",oe,l(t.$t("settings.user.role")),1),e("div",ne,l(v(r).role),1)])]),e("div",ie,[e("div",de,[e("div",ue,l(t.$t("settings.user.createTime")),1),e("div",re,l(new Date(v(r).createTime).toLocaleString()),1)])])])):S("",!0),o(y,{modelValue:m.value,"onUpdate:modelValue":s[5]||(s[5]=a=>m.value=a)},{default:n(()=>[e("h3",null,l(t.$t("settings.user.name")),1),o(g,{label:t.$t("settings.user.name"),modelValue:$.value,"onUpdate:modelValue":s[3]||(s[3]=a=>$.value=a)},null,8,["label","modelValue"]),e("div",ve,[o(i,{onClick:s[4]||(s[4]=a=>m.value=!1)},{default:n(()=>[d(l(t.$t("cancel")),1)]),_:1}),o(i,{onClick:N,color:"primary"},{default:n(()=>[d(l(t.$t("save")),1)]),_:1})])]),_:1},8,["modelValue"]),o(y,{modelValue:c.value,"onUpdate:modelValue":s[8]||(s[8]=a=>c.value=a)},{default:n(()=>[e("h3",null,l(t.$t("settings.user.username")),1),o(g,{label:t.$t("settings.user.username"),modelValue:V.value,"onUpdate:modelValue":s[6]||(s[6]=a=>V.value=a)},null,8,["label","modelValue"]),e("div",me,[o(i,{onClick:s[7]||(s[7]=a=>c.value=!1)},{default:n(()=>[d(l(t.$t("cancel")),1)]),_:1}),o(i,{onClick:D,color:"primary"},{default:n(()=>[d(l(t.$t("save")),1)]),_:1})])]),_:1},8,["modelValue"]),o(y,{modelValue:p.value,"onUpdate:modelValue":s[13]||(s[13]=a=>p.value=a)},{default:n(()=>[e("h3",null,l(t.$t("settings.user.changePassword")),1),o(g,{label:t.$t("settings.user.oldPassword"),modelValue:w.value,"onUpdate:modelValue":s[9]||(s[9]=a=>w.value=a)},null,8,["label","modelValue"]),o(g,{label:t.$t("settings.user.newPassword"),modelValue:_.value,"onUpdate:modelValue":s[10]||(s[10]=a=>_.value=a)},null,8,["label","modelValue"]),o(g,{label:t.$t("settings.user.confirmPassword"),modelValue:U.value,"onUpdate:modelValue":s[11]||(s[11]=a=>U.value=a)},null,8,["label","modelValue"]),e("div",ce,[o(i,{onClick:s[12]||(s[12]=a=>p.value=!1)},{default:n(()=>[d(l(t.$t("cancel")),1)]),_:1}),o(i,{onClick:T,color:"primary"},{default:n(()=>[d(l(t.$t("save")),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}};export{_e as default};
